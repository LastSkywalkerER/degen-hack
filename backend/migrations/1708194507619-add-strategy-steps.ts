import { MigrationInterface, QueryRunner } from 'typeorm';

export class AddStrategySteps1708194507619 implements MigrationInterface {
  public async up(queryRunner: QueryRunner): Promise<void> {
    const strategyIds = await queryRunner.query(`
      SELECT id FROM "Strategy" WHERE title IN ('Strategy 1', 'Strategy 2', 'Strategy 3', 'Strategy 4', 'Strategy 5', 'Strategy 6');
    `);

    await queryRunner.query(`
      INSERT INTO "StrategyStep" (title, address, func, icon, data, "isPublic", "serialNumber", "strategyId")
      VALUES
        ('Step 2', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'supply(address,uint256,address,uint16)', 'icon2', '[{"id":1,"name":"asset", "type":"userValue", "value":"0xC558DBdd856501FCd9aaF1E62eae57A9F0629a3c"}, {"id":2,"name":"amount", "type":"userValue", "value":"10000000000000000000"}, {"id":3,"name":"onBehalfOf", "type":"userAddress"}, {"id":4,"name":"referralCode", "type":"const", "value":0}]', false, 1, ${strategyIds[0].id}),
        ('Step 1', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'borrow(address,uint256,uint256,uint16,address)', 'icon1', '[{"id":1,"name":"asset", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"8000000000"}, {"id":3,"name":"interestRateMode", "type":"const", "value":2}, {"id":4,"name":"referralCode", "type":"const", "value":0}, {"id":5,"name":"onBehalfOf", "type":"userAddress"}]', false, 2, ${strategyIds[0].id}),
        ('Step 3', '0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8', 'approve(address,uint256)', 'icon1', '[{"id":1,"name":"spender", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"7000000000"}]', false, 3, ${strategyIds[0].id}),
        ('Step 4', '0x34bD0413Da3E875D3403b5d48692715C02935F03', 'processSale(address,address,uint256)', 'icon3', '[{"id":1,"name":"saleableToken", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"token", "type":"userValue", "value":"0xcf70b01F810cC997E04a61Cac915ef2821062b69"}, {"id":3,"name":"amount", "type":"userValue", "value":"14000000000"}]', false, 4, ${strategyIds[0].id}),
        ('Step 2', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'supply(address,uint256,address,uint16)', 'icon2', '[{"id":1,"name":"asset", "type":"userValue", "value":"0xC558DBdd856501FCd9aaF1E62eae57A9F0629a3c"}, {"id":2,"name":"amount", "type":"userValue", "value":"1000000000000000000"}, {"id":3,"name":"onBehalfOf", "type":"userAddress"}, {"id":4,"name":"referralCode", "type":"const", "value":0}]', false, 1, ${strategyIds[1].id}),
        ('Step 1', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'borrow(address,uint256,uint256,uint16,address)', 'icon1', '[{"id":1,"name":"asset", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"800000000"}, {"id":3,"name":"interestRateMode", "type":"const", "value":2}, {"id":4,"name":"referralCode", "type":"const", "value":0}, {"id":5,"name":"onBehalfOf", "type":"userAddress"}]', false, 2, ${strategyIds[1].id}),
        ('Step 3', '0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8', 'approve(address,uint256)', 'icon1', '[{"id":1,"name":"spender", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"700000000"}]', false, 3, ${strategyIds[1].id}),
        ('Step 4', '0x34bD0413Da3E875D3403b5d48692715C02935F03', 'processSale(address,address,uint256)', 'icon3', '[{"id":1,"name":"saleableToken", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"token", "type":"userValue", "value":"0xcf70b01F810cC997E04a61Cac915ef2821062b69"}, {"id":3,"name":"amount", "type":"userValue", "value":"1400000000"}]', false, 4, ${strategyIds[1].id}),
        ('Step 2', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'supply(address,uint256,address,uint16)', 'icon2', '[{"id":1,"name":"asset", "type":"userValue", "value":"0xC558DBdd856501FCd9aaF1E62eae57A9F0629a3c"}, {"id":2,"name":"amount", "type":"userValue", "value":"100000000000000"}, {"id":3,"name":"onBehalfOf", "type":"userAddress"}, {"id":4,"name":"referralCode", "type":"const", "value":0}]', false, 1, ${strategyIds[2].id}),
        ('Step 1', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'borrow(address,uint256,uint256,uint16,address)', 'icon1', '[{"id":1,"name":"asset", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"80000000"}, {"id":3,"name":"interestRateMode", "type":"const", "value":2}, {"id":4,"name":"referralCode", "type":"const", "value":0}, {"id":5,"name":"onBehalfOf", "type":"userAddress"}]', false, 2, ${strategyIds[2].id}),
        ('Step 3', '0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8', 'approve(address,uint256)', 'icon1', '[{"id":1,"name":"spender", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"70000000"}]', false, 3, ${strategyIds[2].id}),
        ('Step 4', '0x34bD0413Da3E875D3403b5d48692715C02935F03', 'processSale(address,address,uint256)', 'icon3', '[{"id":1,"name":"saleableToken", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"token", "type":"userValue", "value":"0xcf70b01F810cC997E04a61Cac915ef2821062b69"}, {"id":3,"name":"amount", "type":"userValue", "value":"140000000"}]', false, 4, ${strategyIds[2].id}),
        ('Step 2', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'supply(address,uint256,address,uint16)', 'icon2', '[{"id":1,"name":"asset", "type":"userValue", "value":"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0"}, {"id":2,"name":"amount", "type":"userValue", "value":"1000000000"}, {"id":3,"name":"onBehalfOf", "type":"userAddress"}, {"id":4,"name":"referralCode", "type":"const", "value":0}]', false, 1, ${strategyIds[3].id}),
        ('Step 1', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'borrow(address,uint256,uint256,uint16,address)', 'icon1', '[{"id":1,"name":"asset", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"600000000"}, {"id":3,"name":"interestRateMode", "type":"const", "value":2}, {"id":4,"name":"referralCode", "type":"const", "value":0}, {"id":5,"name":"onBehalfOf", "type":"userAddress"}]', false, 2, ${strategyIds[3].id}),
        ('Step 3', '0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8', 'approve(address,uint256)', 'icon1', '[{"id":1,"name":"spender", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"500000000"}]', false, 3, ${strategyIds[3].id}),
        ('Step 4', '0x34bD0413Da3E875D3403b5d48692715C02935F03', 'processSale(address,address,uint256)', 'icon3', '[{"id":1,"name":"saleableToken", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"token", "type":"userValue", "value":"0xcf70b01F810cC997E04a61Cac915ef2821062b69"}, {"id":3,"name":"amount", "type":"userValue", "value":"1000000000"}]', false, 4, ${strategyIds[3].id}),
        ('Step 2', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'supply(address,uint256,address,uint16)', 'icon2', '[{"id":1,"name":"asset", "type":"userValue", "value":"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0"}, {"id":2,"name":"amount", "type":"userValue", "value":"100000000"}, {"id":3,"name":"onBehalfOf", "type":"userAddress"}, {"id":4,"name":"referralCode", "type":"const", "value":0}]', false, 1, ${strategyIds[4].id}),
        ('Step 1', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'borrow(address,uint256,uint256,uint16,address)', 'icon1', '[{"id":1,"name":"asset", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"60000000"}, {"id":3,"name":"interestRateMode", "type":"const", "value":2}, {"id":4,"name":"referralCode", "type":"const", "value":0}, {"id":5,"name":"onBehalfOf", "type":"userAddress"}]', false, 2, ${strategyIds[4].id}),
        ('Step 3', '0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8', 'approve(address,uint256)', 'icon1', '[{"id":1,"name":"spender", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"50000000"}]', false, 3, ${strategyIds[4].id}),
        ('Step 4', '0x34bD0413Da3E875D3403b5d48692715C02935F03', 'processSale(address,address,uint256)', 'icon3', '[{"id":1,"name":"saleableToken", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"token", "type":"userValue", "value":"0xcf70b01F810cC997E04a61Cac915ef2821062b69"}, {"id":3,"name":"amount", "type":"userValue", "value":"100000000"}]', false, 4, ${strategyIds[4].id}),
        ('Step 2', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'supply(address,uint256,address,uint16)', 'icon2', '[{"id":1,"name":"asset", "type":"userValue", "value":"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0"}, {"id":2,"name":"amount", "type":"userValue", "value":"10000000"}, {"id":3,"name":"onBehalfOf", "type":"userAddress"}, {"id":4,"name":"referralCode", "type":"const", "value":0}]', false, 1, ${strategyIds[5].id}),
        ('Step 1', '0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951', 'borrow(address,uint256,uint256,uint16,address)', 'icon1', '[{"id":1,"name":"asset", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"6000000"}, {"id":3,"name":"interestRateMode", "type":"const", "value":2}, {"id":4,"name":"referralCode", "type":"const", "value":0}, {"id":5,"name":"onBehalfOf", "type":"userAddress"}]', false, 2, ${strategyIds[5].id}),
        ('Step 3', '0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8', 'approve(address,uint256)', 'icon1', '[{"id":1,"name":"spender", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"amount", "type":"userValue", "value":"5000000"}]', false, 3, ${strategyIds[5].id}),
        ('Step 4', '0x34bD0413Da3E875D3403b5d48692715C02935F03', 'processSale(address,address,uint256)', 'icon3', '[{"id":1,"name":"saleableToken", "type":"userValue", "value":"0x94a9D9AC8a22534E3FaCa9F4e7F2E2cf85d5E4C8"}, {"id":2,"name":"token", "type":"userValue", "value":"0xcf70b01F810cC997E04a61Cac915ef2821062b69"}, {"id":3,"name":"amount", "type":"userValue", "value":"10000000"}]', false, 4, ${strategyIds[5].id})
    `);
  }

  public async down(queryRunner: QueryRunner): Promise<void> {
    await queryRunner.query(`
      DELETE FROM "StrategyStep"
      WHERE title IN ('Step 1', 'Step 2', 'Step 3');
    `);
  }
}
